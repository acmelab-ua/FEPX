<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Submitting FEPX to a Job Scheduling Program &mdash; FEPX 2.1.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/my_theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/documentation_options.js?v=20623aea"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="[LEGACY] Restarting a Simulation with Appended Load Steps" href="restart.html" />
    <link rel="prev" title="Overwrting Polycrystal Attributes" href="overwriting.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> FEPX
          </a>
              <div class="version">
                2.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="simple_simulation.html">Simple Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="simple_rve_simulation.html">Simple RVE-type Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="periodic_rve_simulation.html">Periodic RVE-type Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="cruciform_specimen_simulation.html">Cruciform Specimen Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="overwriting.html">Overwrting Polycrystal Attributes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Submitting FEPX to a Job Scheduling Program</a></li>
<li class="toctree-l2"><a class="reference internal" href="restart.html">[LEGACY] Restarting a Simulation with Appended Load Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="multiaxial_csr.html">[LEGACY] Multiaxial Control with Constant Strain Rate</a></li>
<li class="toctree-l2"><a class="reference internal" href="multiaxial_clr.html">[LEGACY] Multiaxial Control with Constant Load Rate</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../papers.html">Reference Papers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../downloads.html">Downloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community.html">Community</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">FEPX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Documentation</a> &raquo;</li>
          <li><a href="../tutorials.html">Tutorials</a> &raquo;</li>
      <li>Submitting FEPX to a Job Scheduling Program</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/doc/tutorials/hpc.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="submitting-fepx-to-a-job-scheduling-program">
<span id="hpc"></span><h1>Submitting FEPX to a Job Scheduling Program<a class="headerlink" href="#submitting-fepx-to-a-job-scheduling-program" title="Link to this heading">ÔÉÅ</a></h1>
<p>Performing simulations on high performance computing clusters typically requires interfacing with a job scheduling program. These programs have a number of directives that are too numerous to define here. For sake of illustration, however, generic submission scripts for the Slurm and Torque job scheduling programs are provided.  Both example scripts below are designed to submit a parallel job of FEPX to 4 nodes with 16 cores per node (i.e., 64 total tasks) to the <code class="xref py py-data docutils literal notranslate"><span class="pre">main</span></code> queue.</p>
<p>A generic submission script, <code class="file docutils literal notranslate"><span class="pre">runslurm.sh</span></code>, for submitting to a Slurm scheduler:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH -J fepxjob</span>
<span class="c1">#SBATCH -q main</span>
<span class="c1">#SBATCH --ntasks 64</span>
<span class="c1">#SBATCH --ntasks-per-node 16</span>
<span class="c1">#SBATCH -o output.%A</span>
<span class="c1">#SBATCH -e errors.%A</span>

srun<span class="w"> </span>--mpi<span class="o">=</span>pmi2<span class="w"> </span>fepx
</pre></div>
</div>
<p>would be run by entering the following into the terminal from within the simulation directory:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sbatch<span class="w"> </span>runslurm.sh
</pre></div>
</div>
<p>A generic submission script, <code class="file docutils literal notranslate"><span class="pre">runtorque.sh</span></code>, for submitting to a Torque scheduler:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#PBS -N fepxjob</span>
<span class="c1">#PBS -q main</span>
<span class="c1">#PBS -l nodes=4:ppn=16</span>
<span class="c1">#PBS -k oe</span>
<span class="c1">#PBS -j oe</span>

<span class="c1"># Change to the current working directory</span>
<span class="nb">cd</span><span class="w"> </span><span class="nv">$PBS_O_WORKDIR</span>

<span class="c1"># Calculate the total number of cores requested</span>
<span class="nv">NP</span><span class="o">=</span><span class="sb">`</span>cat<span class="w"> </span><span class="nv">$PBS_NODEFILE</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l<span class="sb">`</span>

mpirun<span class="w"> </span>-np<span class="w"> </span><span class="nv">$@</span><span class="o">{</span>NP@<span class="o">}</span><span class="w"> </span>fepx
</pre></div>
</div>
<p>would be run by entering the following into the terminal from within the simulation directory:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>qsub<span class="w"> </span>runtorque.sh
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="overwriting.html" class="btn btn-neutral float-left" title="Overwrting Polycrystal Attributes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="restart.html" class="btn btn-neutral float-right" title="[LEGACY] Restarting a Simulation with Appended Load Steps" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright ACME Lab, CNRS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>