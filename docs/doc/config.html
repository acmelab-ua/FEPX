<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Configuration File (simulation.cfg) &mdash; FEPX 2.0.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/documentation_options.js?v=51b770b3"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Crystal Behavior (simulation.cfg)" href="material.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> FEPX
          </a>
              <div class="version">
                2.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../features.html">Features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="copying.html">Conditions of Use</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Configuration File (<code class="file docutils literal notranslate"><span class="pre">simulation.cfg</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general-structure">General Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#special-commands">Special Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#polycrystal-overwriting">Polycrystal Overwriting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#simulation-restart">Simulation Restart</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="material.html">Crystal Behavior (<code class="file docutils literal notranslate"><span class="pre">simulation.cfg</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="loading.html">Loading (<code class="file docutils literal notranslate"><span class="pre">simulation.cfg</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="output.html">Simulation Results (<code class="file docutils literal notranslate"><span class="pre">simulation.cfg</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="running.html">Convergence Parameters (<code class="file docutils literal notranslate"><span class="pre">simulation.cfg</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="crystal.html">Crystal Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="fileformat.html">File and Directory Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="versions.html">Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="develhistory.html">Development History (1990-2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpl.html">GNU General Public License</a></li>
<li class="toctree-l2"><a class="reference internal" href="fdl.html">GNU Free Documentation License</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../papers.html">Reference Papers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloads.html">Downloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">FEPX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Documentation</a> &raquo;</li>
      <li>Configuration File (<code class="file docutils literal notranslate"><span class="pre">simulation.cfg</span></code>)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/doc/config.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="configuration-file-simulation-cfg">
<span id="config-file"></span><h1>Configuration File (<code class="file docutils literal notranslate"><span class="pre">simulation.cfg</span></code>)<a class="headerlink" href="#configuration-file-simulation-cfg" title="Link to this heading"></a></h1>
<p>A simulation input typically consists of two files with pre-defined names: the mesh file, <code class="file docutils literal notranslate"><span class="pre">simulation.msh</span></code>, and the configuration file, <code class="file docutils literal notranslate"><span class="pre">simulation.cfg</span></code>, which are read by the program at run time.  The mesh file describes the polycrystal as a finite element mesh, where the grains are defined by element sets, with additional fields to record polycrystal-related information, such as (optionally) phases, crystal orientations, or simulation-related information, such as node sets and mesh partitions.
The configuration file completes the definition of the polycrystal by the specification of the material model and the corresponding parameters, and defines the details of the simulation (boundary conditions, loading history, output, etc).
The mesh file is typically provided by Neper and does not need to be edited, and information on its format can be found in <a class="reference internal" href="fileformat.html#mesh-file"><span class="std std-ref">Mesh File (simulation.msh)</span></a>.  Conversely, the configuration file is specific to the program and is to be written by the user.
Of course, the mesh file and the and configuration file are closely related and should be consistent with each other.</p>
<section id="general-structure">
<h2>General Structure<a class="headerlink" href="#general-structure" title="Link to this heading"></a></h2>
<p>The configuration file (<code class="file docutils literal notranslate"><span class="pre">simulation.cfg</span></code>) is structured in several, successive blocks that define different aspects of the simulation.  Each of these blocks is headed by a line starting by <code class="xref py py-data docutils literal notranslate"><span class="pre">#</span></code>, which provides a short description of the block.  The structure for the <code class="file docutils literal notranslate"><span class="pre">simulation.cfg</span></code> file is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Material Description</span>

    <span class="p">{</span> <span class="n">parameter</span> <span class="n">definition</span> <span class="p">}</span>

<span class="c1"># Boundary Conditions / Deformation History</span>

    <span class="p">{</span> <span class="n">parameter</span> <span class="n">definition</span> <span class="p">}</span>

<span class="c1"># Output</span>

    <span class="p">{</span> <span class="n">parameter</span> <span class="n">definition</span> <span class="p">}</span>

<span class="c1"># Special commands</span>

   <span class="p">{</span> <span class="n">commands</span> <span class="p">}</span>
</pre></div>
</div>
<p><code class="xref py py-data docutils literal notranslate"><span class="pre">{</span> <span class="pre">parameter</span> <span class="pre">definition</span> <span class="pre">}</span></code> represents a general block of text that follows the following syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">key_phrase1</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">value1</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">key_phrase2</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">value2</span><span class="o">&gt;</span>
<span class="o">...</span>
</pre></div>
</div>
<p><code class="xref py py-data docutils literal notranslate"><span class="pre">&lt;key_phrase&gt;</span> <span class="pre">&lt;value&gt;</span></code> is the input structure of the file, where <code class="xref py py-data docutils literal notranslate"><span class="pre">&lt;key_phrase&gt;</span></code> is either a simulation parameter or a command and <code class="xref py py-data docutils literal notranslate"><span class="pre">&lt;value&gt;</span></code> are one or several numerical or literal values.  A parameter takes only one value, while a command can require one or several values. The possible inputs will be defined in the following sections.</p>
<p><code class="xref py py-data docutils literal notranslate"><span class="pre">{</span> <span class="pre">commands</span> <span class="pre">}</span></code> represents <em>special commands</em> that go beyond the definition of a standard simulation, by allowing to override mesh attributes (see <a class="reference internal" href="#overriding"><span class="std std-ref">Polycrystal Overwriting</span></a>) or restarting a simulation (see <a class="reference internal" href="#restart"><span class="std std-ref">Simulation Restart</span></a>).</p>
<p>In the following, brackets (<code class="xref py py-data docutils literal notranslate"><span class="pre">[</span></code> / <code class="xref py py-data docutils literal notranslate"><span class="pre">]</span></code>) will be used to denote optional inputs (they are <em>not</em> expected in the <code class="file docutils literal notranslate"><span class="pre">simulation.cfg</span></code> file and will generate parsing errors):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="o">&lt;</span><span class="n">required_key_phrase</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">value1</span><span class="o">&gt;</span>
 <span class="p">[</span> <span class="o">&lt;</span><span class="n">optional_key_phrase</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span> <span class="p">]</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Any piece of text that is preceded by a <code class="xref py py-data docutils literal notranslate"><span class="pre">#</span></code> is considered as a comment and is ignored (which also makes block headers optional).
A single line in the file should only ever pertain to a single <code class="xref py py-data docutils literal notranslate"><span class="pre">&lt;key_phrase&gt;</span></code>/<code class="xref py py-data docutils literal notranslate"><span class="pre">&lt;value&gt;</span></code> pairing.  All strings are interpreted literally and should be lowercase except where otherwise stated.
Parameters within a block may generally be specified in any order; however, the material parameters and deformation history must follow specific orders, and it is recommended that the overall structure of the <a class="reference internal" href="#config-file"><span class="std std-ref">Configuration File (simulation.cfg)</span></a> follows the example structure above.  Spaces and indentations may be freely used for file formatting and do not affect parsing.</p>
<div class="admonition note" id="consistency">
<p class="admonition-title">Note</p>
<p>The following points are important to ensure the consistency between the <a class="reference internal" href="fileformat.html#mesh-file"><span class="std std-ref">Mesh File (simulation.msh)</span></a>, the <a class="reference internal" href="#config-file"><span class="std std-ref">Configuration File (simulation.cfg)</span></a> and the running conditions (MPI):</p>
<blockquote>
<div><ul>
<li><p>The physical dimension of the mesh: the loading definition may be sensitive to this dimension</p></li>
<li><p>The number of phases: a material behavior must be defined for each phase</p></li>
<li><p>The definition of the node sets: the boundary conditions must be applied to existing node sets</p></li>
<li><p>The number of partitions of the mesh: it must match the number of computation units. A mesh can be “re-partitionned” by Neper at any time using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">neper -M -loadmesh simulation.msh -part &lt;num_partitions&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</div>
</section>
<section id="special-commands">
<h2>Special Commands<a class="headerlink" href="#special-commands" title="Link to this heading"></a></h2>
<section id="polycrystal-overwriting">
<span id="overriding"></span><h3>Polycrystal Overwriting<a class="headerlink" href="#polycrystal-overwriting" title="Link to this heading"></a></h3>
<p>Optionally, crystallographic phase and orientations different from the ones defined in the <a class="reference internal" href="fileformat.html#mesh-file"><span class="std std-ref">Mesh File (simulation.msh)</span></a> can be defined in external files by adding appropriate commands to the configuration file.</p>
<p>To read in orientations from an <a class="reference internal" href="fileformat.html#ori-file"><span class="std std-ref">Orientation File (simulation.ori)</span></a>, the following command may be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">read_ori_from_file</span>
</pre></div>
</div>
<p>To read in grain/phase assignments from a <a class="reference internal" href="fileformat.html#phase-file"><span class="std std-ref">Phase File (simulation.phase)</span></a>, the following command may be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">read_phase_from_file</span>
</pre></div>
</div>
</section>
<section id="simulation-restart">
<span id="restart"></span><h3>Simulation Restart<a class="headerlink" href="#simulation-restart" title="Link to this heading"></a></h3>
<p>A simulation may be restarted only if the restart files were printed as simulation output on the previous run (see <a class="reference internal" href="output.html#advanced-results"><span class="std std-ref">Advanced Results</span></a>).  Upon restart, the restart files must be included in the simulation directory along with all simulation inputs (the <a class="reference internal" href="fileformat.html#mesh-file"><span class="std std-ref">Mesh File (simulation.msh)</span></a>, the <a class="reference internal" href="#config-file"><span class="std std-ref">Configuration File (simulation.cfg)</span></a>, and any other files, such as an <a class="reference internal" href="fileformat.html#ori-file"><span class="std std-ref">Orientation File (simulation.ori)</span></a> or <a class="reference internal" href="fileformat.html#phase-file"><span class="std std-ref">Phase File (simulation.phase)</span></a>).</p>
<p>A simulation may be restarted by adding the following line to the <code class="file docutils literal notranslate"><span class="pre">simulation.cfg</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">restart</span> <span class="n">on</span>
</pre></div>
</div>
<p>When restarting a simulation, the prescribed <a class="reference internal" href="loading.html#deformation-history"><span class="std std-ref">Deformation History (Steps)</span></a> should include only additional steps, as the restarted simulation will not consider steps that were completed in the previous simulation.  Consequently, step and increment indices, as well as the simulation time, are all reset to 0.</p>
<p>A simulation restart must be performed with the same number of cores that were used to run the original simulation.
When a simulation restarts, it will attempt to find the simulation restart files with the highest step index, <code class="xref py py-data docutils literal notranslate"><span class="pre">&lt;N&gt;</span></code>. It will write output variable data to a new set of files, <code class="file docutils literal notranslate"><span class="pre">post.&lt;var&gt;.rst&lt;N+1&gt;.core*</span></code>, where <code class="xref py py-data docutils literal notranslate"><span class="pre">&lt;var&gt;</span></code> is the requested output variable name and <code class="xref py py-data docutils literal notranslate"><span class="pre">rst</span></code> is the restart label applied to all new output variable files. Likewise, if restart files are again printed, their index will increase to <code class="xref py py-data docutils literal notranslate"><span class="pre">&lt;N+2&gt;</span></code> (the previous restart’s files will not be overwritten).</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="introduction.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="material.html" class="btn btn-neutral float-right" title="Crystal Behavior (simulation.cfg)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright ACME Lab, CNRS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>